############################################################
# Context Kit Service Configuration (.env.example)
# Copy to .env and replace placeholders. DO NOT commit secrets.
#
# This file incorporates planning decisions (D-001..D-007) for the
# Assistant Sidecar Unification feature.
############################################################

# ============================================================
# Provider Configuration (Choose applicable sections)
# ============================================================

# --- Azure OpenAI ---
# Endpoint for your Azure OpenAI resource (no trailing slash)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# Optional explicit key if not supplied via secure credential manager (leave blank if managed externally)
# AZURE_OPENAI_API_KEY=__REPLACE_ME_SECURELY__
# Deployment / model name (e.g., gpt-4, gpt-35-turbo)
AZURE_OPENAI_MODEL=gpt-4

# --- Standard OpenAI (if used instead of Azure) ---
# OPENAI_API_KEY=sk-__REPLACE_ME_SECURELY__
# OPENAI_MODEL=gpt-4o

# --- Ollama Local Provider ---
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=llama3:8b
OLLAMA_ENABLED=true

# ============================================================
# Embeddings / RAG Configuration (Deterministic pipeline D-004)
# ============================================================
ENABLE_EMBEDDINGS=true
EMBEDDINGS_MODEL=text-embedding-3-large
EMBEDDINGS_INDEX_PATH=./rag/index.json

# ============================================================
# Service Runtime Configuration
# ============================================================
PORT=8000
HOST=127.0.0.1
LOG_LEVEL=info
ALLOW_ORIGINS=app://local

# Capability manifest auto refresh interval (minutes) (D-007)
CAPABILITY_REFRESH_INTERVAL_MINUTES=15

# Tool concurrency limit (D-003)
TOOL_CONCURRENCY_LIMIT=3

# Streaming enabled by default (performance goal SC-005)
STREAMING_ENABLED=true

# Automatic legacy migration toggle (FR-036)
MIGRATION_AUTO=true

# Diff summarization thresholds (D-005)
DIFF_SUMMARIZE_LINE_THRESHOLD=2000
DIFF_SUMMARIZE_CHANGED_THRESHOLD=400

# Tool p95 duration thresholds (D-002) (milliseconds)
P95_VALIDATE_MS=3000
P95_BUILD_GRAPH_MS=5000
P95_IMPACT_MS=7000
P95_GENERATE_MS=4000

# Telemetry configuration (D-006)
TELEMETRY_ENABLED=true
TELEMETRY_FLUSH_INTERVAL_MS=5000
TELEMETRY_MAX_BUFFER=500

# Session export defaults
SESSION_EXPORT_FORMAT=markdown

# Security / Warnings suppression (example)
# PYTHONWARNINGS=ignore::UserWarning

# ============================================================
# Advanced / Optional
# ============================================================
# MAX_STREAM_BUFFER=8192
# RETRY_MAX_ATTEMPTS=2
# RETRY_BACKOFF_MS=750

# ============================================================
# Placeholder Guidance:
# - Replace __REPLACE_ME_SECURELY__ with real secrets stored using OS key vaults.
# - Never commit actual API keys; keep only this template in Git.
# - If using external secret injection, leave key fields commented out.
# ============================================================

